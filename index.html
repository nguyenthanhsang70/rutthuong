<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L√¨ X√¨ May M·∫Øn 2026 üßß</title>
    <link href="https://fonts.googleapis.com/css2?family=Pattaya&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --red-tet: #c8102e;
            --gold-tet: #ffcd00;
            --dark-red: #8b0000;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Montserrat', sans-serif;
            background: radial-gradient(circle at center, #5c0000 0%, #1a0000 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            padding: 15px;
            color: white;
        }
        .container {
            text-align: center;
            max-width: 520px;
            width: 100%;
            position: relative;
            z-index: 1;
        }
        h1 {
            font-family: 'Pattaya', cursive;
            color: var(--gold-tet);
            font-size: clamp(2.5em, 8vw, 3.8em);
            text-shadow: 0 0 20px rgba(255,205,0,0.7), 3px 3px 0 #000;
            margin-bottom: 8px;
        }
        .subtitle {
            color: #ffd;
            font-style: italic;
            margin-bottom: 25px;
            font-size: clamp(1em, 4vw, 1.1em);
        }
        .lixi-icon {
            font-size: clamp(120px, 40vw, 180px);
            margin: clamp(30px, 10vw, 50px) auto clamp(20px, 8vw, 30px);
            transition: all 0.4s ease;
            text-shadow: 0 8px 20px rgba(0,0,0,0.5);
            pointer-events: none;
        }
        .lixi-icon:hover {
            transform: scale(1.12) rotate(5deg);
            filter: drop-shadow(0 0 25px #ffcd00);
        }
        .input-group {
            margin: 0 auto 20px;
            max-width: 380px;
            display: flex;
            gap: 8px;
        }
        input {
            flex: 1;
            padding: clamp(12px, 4vw, 14px) 18px;
            border-radius: 50px;
            border: 3px solid var(--gold-tet);
            font-size: clamp(1em, 4vw, 1.1em);
            font-weight: bold;
            text-align: center;
            background: rgba(255,255,255,0.15);
            color: white;
            outline: none;
        }
        input::placeholder { color: rgba(255,255,255,0.6); }
        .btn-main {
            background: linear-gradient(180deg, #ffea70, #ffcd00);
            color: #8b0000;
            border: none;
            padding: clamp(14px, 5vw, 16px) clamp(40px, 10vw, 50px);
            font-size: clamp(1.2em, 5vw, 1.35em);
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 0 #b8860b, 0 12px 25px rgba(0,0,0,0.4);
            transition: all 0.18s;
            margin: 0 auto 20px;
            display: block;
            min-width: 220px;
            width: 80%;
            max-width: 300px;
        }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 12px 0 #b8860b, 0 18px 35px rgba(0,0,0,0.5); }
        .btn-main:active { transform: translateY(4px); box-shadow: 0 3px 0 #b8860b; }
        .btn-main:disabled { opacity: 0.6; cursor: not-allowed; box-shadow: none; transform: none; }

        /* Modal h∆∞·ªõng d·∫´n */
        #guideModal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }
        #guideModal.visible { opacity: 1; visibility: visible; }
        .modal-content {
            background: linear-gradient(135deg, #c8102e, #8b0000);
            border: 5px solid var(--gold-tet);
            border-radius: 20px;
            width: 90%;
            max-width: 480px;
            max-height: 90vh;
            overflow-y: auto;
            padding: clamp(20px, 5vw, 30px);
            color: white;
            text-align: left;
            box-shadow: 0 15px 50px rgba(0,0,0,0.8), inset 0 5px 20px rgba(255,255,255,0.15);
            position: relative;
            animation: popIn 0.6s ease-out;
        }
        @keyframes popIn {
            0% { transform: scale(0.7); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .modal-content h2 {
            font-family: 'Pattaya', cursive;
            color: var(--gold-tet);
            font-size: clamp(1.8em, 6vw, 2.2em);
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 6px #000;
        }
        .modal-content p, .modal-content ul {
            font-size: clamp(0.95em, 3.5vw, 1.05em);
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .modal-content ul {
            padding-left: 25px;
            list-style: none;
        }
        .modal-content ul li {
            margin-bottom: 8px;
            position: relative;
        }
        .modal-content ul li::before {
            content: "üßß ";
            position: absolute;
            left: -25px;
            font-size: 1.2em;
        }
        .modal-btn {
            background: linear-gradient(180deg, #ffea70, #ffcd00);
            color: #8b0000;
            border: none;
            padding: clamp(12px, 4vw, 14px) clamp(30px, 8vw, 40px);
            font-size: clamp(1.1em, 4.5vw, 1.3em);
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin: 20px auto 0;
            display: block;
            box-shadow: 0 6px 0 #b8860b;
            transition: all 0.2s;
        }
        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 0 #b8860b;
        }
        .modal-btn:active {
            transform: translateY(2px);
            box-shadow: 0 3px 0 #b8860b;
        }

        /* K·∫øt qu·∫£ & L·ªãch s·ª≠ */
        #resultCard {
            margin: clamp(20px, 6vw, 30px) auto;
            width: clamp(280px, 80vw, 320px);
            height: clamp(170px, 50vw, 200px);
            background: linear-gradient(135deg, var(--red-tet), #a00000);
            border: 5px solid var(--gold-tet);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.7), inset 0 5px 20px rgba(255,255,255,0.15);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            opacity: 0;
            transform: scale(0.85);
            transition: all 0.7s ease;
        }
        #resultCard.visible { opacity: 1; transform: scale(1); }
        #resultCard::before {
            content: 'üßß';
            position: absolute;
            top: 8px; right: 12px;
            font-size: clamp(2.5em, 8vw, 3.2em);
            opacity: 0.25;
            pointer-events: none;
        }
        .flap-top {
            width: 100%; height: clamp(40px, 10vw, 45px);
            background: linear-gradient(to bottom, #ff4d4d, var(--red-tet));
            border-bottom: 5px solid var(--gold-tet);
            display: flex; align-items: center; justify-content: center;
            font-family: 'Pattaya', cursive; font-size: clamp(1.4em, 5vw, 1.8em);
            color: var(--gold-tet); text-shadow: 2px 2px 4px #000;
            position: absolute; top: 0; left: 0;
        }
        .result-amount {
            font-size: clamp(2.5em, 10vw, 3.5em);
            font-weight: 900;
            color: #00ff41; text-shadow: 3px 3px 8px #000;
            margin: clamp(30px, 10vw, 40px) 0 10px; z-index: 2;
        }
        .bottom-text {
            font-size: clamp(1em, 4vw, 1.2em);
            color: #fff9e6;
            text-shadow: 1px 1px 3px #000; margin-bottom: 10px;
        }
        .history-card {
            background: rgba(255,255,255,0.08); border-radius: 16px;
            padding: clamp(15px, 5vw, 20px);
            margin-top: clamp(30px, 8vw, 40px);
            border: 1px solid var(--gold-tet); color: white;
        }
        .history-list { max-height: 220px; overflow-y: auto; margin-top: 12px; }
        .history-item {
            display: flex; justify-content: space-between;
            padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.12);
            font-size: clamp(0.9em, 3.5vw, 0.95em);
            flex-wrap: wrap;
            gap: 10px;
        }
        .confetti {
            position: fixed; width: 12px; height: 12px;
            border-radius: 3px; z-index: 100; pointer-events: none;
        }
        @media (max-width: 500px) {
            body { padding: 10px; }
            .container { padding: 0 10px; }
            .input-group { flex-direction: column; gap: 12px; }
            input { width: 100%; }
            .btn-main { width: 100%; min-width: unset; padding: 14px 30px; }
            .history-item { flex-direction: column; text-align: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>L√¨ X√¨ T·∫øt 2026</h1>
        <p class="subtitle">Ch·ªâ nh·∫≠n l·ªôc **m·ªôt l·∫ßn duy nh·∫•t** ‚Äì Ch√∫c b·∫°n may m·∫Øn!</p>

        <div class="input-group">
            <input type="text" id="userName" placeholder="Nh·∫≠p h·ªç v√† t√™n ƒë·∫ßy ƒë·ªß" maxlength="40">
        </div>

        <div class="lixi-icon">üßß</div>

        <button class="btn-main" id="btnAction" onclick="openLixi()">R√öT L√å X√å NGAY</button>

        <div id="resultCard">
            <div class="flap-top">CH√öC M·ª™NG NƒÇM M·ªöI</div>
            <div class="result-amount">0ƒë</div>
            <div class="bottom-text">CH√öC M·ª™NG NƒÇM M·ªöI</div>
        </div>

        <div class="history-card">
            <div style="font-weight:bold; border-bottom:1px solid var(--gold-tet); padding-bottom:8px;">
                 DANH S√ÅCH NH·∫¨N L·ªòC
            </div>
            <div class="history-list" id="historyList"></div>
            <button onclick="clearAll()" style="background:none; border:none; color:#ffaaaa; cursor:pointer; font-size:0.85em; margin-top:12px; display:block; margin-left:auto;">
                X√≥a l·ªãch s·ª≠
            </button>
        </div>
    </div>

    <!-- Modal h∆∞·ªõng d·∫´n -->
    <div id="guideModal">
        <div class="modal-content">
            <h2>H∆Ø·ªöNG D·∫™N CH∆†I L√å X√å T·∫æT 2026</h2>
            <p>1. Nh·∫≠p <strong>h·ªç v√† t√™n ƒê·∫¶Y ƒê·ª¶</strong> (v√≠ d·ª•: Nguy·ªÖn VƒÉn A).<br>
               ‚Üí Ch·ªâ nh·∫≠p t√™n ri√™ng (VƒÉn A, B√≠ch, A...) s·∫Ω kh√¥ng ƒë∆∞·ª£c r√∫t!</p>
            <p>2. Nh·∫•n n√∫t <strong>"R√öT L√å X√å NGAY"</strong> ƒë·ªÉ nh·∫≠n l·ªôc.<br>
               ‚Üí M·ªói ng∆∞·ªùi ch·ªâ ƒë∆∞·ª£c r√∫t <strong>1 l·∫ßn duy nh·∫•t</strong>!</p>
            <p>3. C√°c m·ª©c ti·ªÅn c√≥ th·ªÉ nh·∫≠n (x√°c su·∫•t tr√∫ng l√† ng·∫´u nhi√™n):</p>
            <ul>
                <li>10.000ƒë (Gi·∫£i An ·ª¶i)</li>
                <li>20.000ƒë (Gi·∫£i Khuy·∫øn Kh√≠ch)</li>
                <li>50.000ƒë (Gi·∫£i T∆∞)</li>
                <li>100.000ƒë (Gi·∫£i Ba)</li>
                <li>200.000ƒë (Gi·∫£i Nh√¨)</li>
                <li>500.000ƒë (Gi·∫£i Nh·∫•t)</li>
                <li>1.000.000ƒë (Gi·∫£i ƒê·∫∑c Bi·ªát)</li>
            </ul>
            <p style="text-align:center; font-weight:bold; margin-top:20px;">
                Ch√∫c b·∫°n may m·∫Øn nh·∫≠n ƒë∆∞·ª£c l·ªôc l·ªõn! üßßüí∞
            </p>
             <p style="text-align:center; font-weight:bold; margin-top:20px;">
                L∆ØU √ù: CH·ª§P L·∫†I K·∫æT QU·∫¢ R·ªíI G·ª¨I CHO SANG N·∫æU NH·∫¨N ƒê∆Ø·ª¢C TI·ªÄN, XIN C·∫¢M ∆†N!
            </p>
            <button class="modal-btn" onclick="closeGuide()">T√¥i ƒê√£ hi·ªÉu</button>
        </div>
    </div>

    <audio id="sndTing" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>
    <audio id="sndJackpot" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

    <script>
        let isProcessing = false;
        let history = JSON.parse(localStorage.getItem('lixi_history_2026')) || [];

        // Danh s√°ch t√™n ƒë·∫∑c bi·ªát v√† m·ª©c ti·ªÅn c·ªë ƒë·ªãnh
        const specialNames = {
            // "phan th·ªã di·ªáp anh": 200000,
            // "nguy·ªÖn ng·ªçc ph∆∞∆°ng nhi": 200000,
            // "h√† y·∫øn nhi": 200000,
            // "la thi√™n v≈©": 50000,
            // "t√†o minh nh·∫≠t": 50000,
            // "nguy·ªÖn thanh h·∫£i": 50000,
            // "b√πi minh ƒë·ª©c": 50000,
            // "ho√†ng ƒë·ªó gia huy": 50000,
            "nguy·ªÖn ƒë·ª©c vi·ªát": 50000
        };

        const normalOptions = [
            { val: 10000,   weight: 40   },
            { val: 20000,   weight: 20   },
            { val: 50000,   weight: 20   },
            { val: 100000,  weight: 10   },
            { val: 200000,  weight: 6    },
            { val: 500000,  weight: 3.5  },
            { val: 1000000, weight: 0.001 }
        ];

        // Lu√¥n hi·ªÉn th·ªã modal h∆∞·ªõng d·∫´n m·ªói khi load trang
        function showGuide() {
            document.getElementById('guideModal').classList.add('visible');
        }

        function closeGuide() {
            document.getElementById('guideModal').classList.remove('visible');
            updateDisplay();
        }

        window.onload = function() {
            showGuide();
            updateDisplay();
        };

        function getRandomAmount(name) {
            const normalizedName = name.toLowerCase().trim();
            if (specialNames[normalizedName] !== undefined) {
                return specialNames[normalizedName];
            }
            let totalWeight = normalOptions.reduce((sum, item) => sum + item.weight, 0);
            let random = Math.random() * totalWeight;
            for (let option of normalOptions) {
                if (random < option.weight) return option.val;
                random -= option.weight;
            }
            return 10000; // fallback
        }

        function openLixi() {
            const nameInput = document.getElementById('userName');
            const name = nameInput.value.trim();

            if (!name) {
                alert("Vui l√≤ng nh·∫≠p h·ªç v√† t√™n ƒë·∫ßy ƒë·ªß ƒë·ªÉ nh·∫≠n l·ªôc nh√©! üßß\nV√≠ d·ª•: Nguy·ªÖn VƒÉn A");
                nameInput.focus();
                return;
            }

            const nameParts = name.split(/\s+/).filter(part => part.length > 0);
            if (nameParts.length < 2) {
                alert("Vui l√≤ng nh·∫≠p **ƒë·∫ßy ƒë·ªß h·ªç v√† t√™n** (√≠t nh·∫•t 2 t·ª´)! \nV√≠ d·ª•: Nguy·ªÖn VƒÉn A \nKh√¥ng ƒë∆∞·ª£c ch·ªâ nh·∫≠p t√™n ri√™ng l·∫ª.");
                nameInput.focus();
                return;
            }

            const hasPlayed = history.find(item => item.name.toLowerCase() === name.toLowerCase());
            if (hasPlayed) {
                alert(`B·∫°n ƒë√£ nh·∫≠n ${hasPlayed.val.toLocaleString('vi-VN')}ƒë r·ªìi ${name} ∆°i!\nH·∫πn nƒÉm sau nha! ‚ú®`);
                return;
            }

            if (isProcessing) return;
            isProcessing = true;
            document.getElementById('btnAction').disabled = true;

            const amount = getRandomAmount(name);

            if (amount >= 500000) document.getElementById('sndJackpot').play();
            else document.getElementById('sndTing').play();

            createConfetti(amount >= 500000 ? 120 : amount >= 200000 ? 80 : 40);

            const now = new Date();
            const datetime = now.toLocaleString('vi-VN', {
                day: '2-digit', month: '2-digit', year: 'numeric',
                hour: '2-digit', minute: '2-digit', second: '2-digit',
                hour12: false
            });

            setTimeout(() => {
                const resultCard = document.getElementById('resultCard');
                resultCard.innerHTML = `
                    <div class="flap-top">CH√öC M·ª™NG NƒÇM M·ªöI</div>
                    <div class="result-amount">${amount.toLocaleString('vi-VN')}ƒë</div>
                    <div class="bottom-text">CH√öC M·ª™NG NƒÇM M·ªöI</div>
                `;
                resultCard.classList.add('visible');

                history.push({ name, val: amount, datetime });
                localStorage.setItem('lixi_history_2026', JSON.stringify(history));
                updateDisplay();

                setTimeout(() => {
                    resultCard.classList.remove('visible');
                    resultCard.innerHTML = `
                        <div class="flap-top">CH√öC M·ª™NG NƒÇM M·ªöI</div>
                        <div class="result-amount">0ƒë</div>
                        <div class="bottom-text">CH√öC M·ª™NG NƒÇM M·ªöI</div>
                    `;
                    document.getElementById('btnAction').disabled = false;
                    isProcessing = false;
                }, 5000);
            }, 800);
        }

        function createConfetti(count) {
            const colors = ['#ffcd00', '#ff2d55', '#ffffff', '#00ff88', '#ff99cc', '#ffd700', '#ff6600', '#c8ff00'];
            for (let i = 0; i < count; i++) {
                const c = document.createElement('div');
                c.className = 'confetti';
                c.style.left = Math.random() * 100 + 'vw';
                c.style.top = '-20px';
                c.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                c.style.width = (8 + Math.random() * 14) + 'px';
                c.style.height = c.style.width;
                c.style.opacity = 0.7 + Math.random() * 0.3;
                document.body.appendChild(c);

                const x = Math.random() * 400 - 200;
                const angle = Math.random() * 720 - 360;
                const duration = 1800 + Math.random() * 2400;

                c.animate([
                    { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 },
                    { transform: `translate(${x}px, 110vh) rotate(${angle}deg)`, opacity: 0 }
                ], {
                    duration: duration,
                    easing: 'cubic-bezier(0.22, 0.61, 0.36, 1)'
                }).onfinish = () => c.remove();
            }
        }

        function updateDisplay() {
            const list = document.getElementById('historyList');

            if (history.length === 0) {
                list.innerHTML = `<div style="padding:25px; opacity:0.6; text-align:center;">Ch∆∞a c√≥ ai r√∫t l√¨ x√¨</div>`;
                return;
            }

            list.innerHTML = history.slice().reverse().map(item => `
                <div class="history-item">
                    <span><b>${item.name}</b> <small>${item.datetime}</small></span>
                    <span style="color: #ffcd00; font-weight:bold;">+${item.val.toLocaleString('vi-VN')}ƒë</span>
                </div>
            `).join('');
        }

        function clearAll() {
            const pass = prompt("Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ x√≥a l·ªãch s·ª≠:");
            if (pass === "Admin2026") {
                history = [];
                localStorage.removeItem('lixi_history_2026');
                updateDisplay();
                alert("ƒê√£ x√≥a to√†n b·ªô l·ªãch s·ª≠!");
            } else if (pass !== null) {
                alert("M·∫≠t kh·∫©u sai!");
            }
        }
    </script>
</body>
</html>
